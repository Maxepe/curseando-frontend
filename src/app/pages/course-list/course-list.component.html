<div class="course-list-container">
  <div class="container">
    <!-- Header Section -->
    <header class="page-header">
      <h1>Curseando</h1>
      <p class="subtitle">Descubr√≠ e inscribite en cursos para mejorar tus habilidades</p>
    </header>

    <!-- Filter Section -->
    <div class="filter-section">
      <label for="difficulty-filter" class="filter-label">Filtrar por dificultad:</label>
      <select
        id="difficulty-filter"
        class="difficulty-filter"
        [(ngModel)]="selectedDifficulty"
        (change)="onFilterChange(selectedDifficulty)"
      >
        <option *ngFor="let diff of difficulties" [value]="diff.value">
          {{ diff.label }}
        </option>
      </select>
    </div>

    @if (loading) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>Cargando cursos...</p>
      </div>
    } @else if (error) {
      <div class="error-container">
        <div class="error-card">
          <h3>Error al cargar los cursos</h3>
          <p>{{ error }}</p>
          <button class="btn btn-primary" (click)="loadCourses()">Intentar de nuevo</button>
        </div>
      </div>
    } @else if (filteredCourses.length === 0) {
      <div class="empty-state">
        <h3>No se encontraron cursos</h3>
        <p>Prob√° ajustando los filtros o volv√© m√°s tarde para ver nuevos cursos.</p>
      </div>
    } @else {
      <div class="courses-grid">
        @for (course of filteredCourses; track course.id) {
          <div
            class="course-card card"
            (click)="viewCourse(course.id)"
            role="button"
            tabindex="0"
            (keydown.enter)="viewCourse(course.id)"
          >
            <div class="card-header">
              <span class="difficulty-badge" [ngClass]="'difficulty-' + course.difficulty.toLowerCase()">
                {{ getDifficultyLabel(course.difficulty) }}
              </span>
            </div>

        <div class="card-body">
          <h3 class="course-title">{{ course.title }}</h3>

          <div class="course-meta">
            <div class="meta-item">
              <span class="meta-icon">üë®‚Äçüè´</span>
              <span class="meta-text">{{ course.instructor }}</span>
            </div>

            <div class="meta-item">
              <span class="meta-icon">‚è±Ô∏è</span>
              <span class="meta-text">{{ course.duration }}</span>
            </div>
          </div>

          <div class="course-enrollment">
            <div class="enrollment-info">
              <span class="enrolled-count">{{ course.enrolledCount }} inscriptos</span>
              <span class="capacity">de {{ course.capacity }}</span>
            </div>

            <div
              class="seats-badge"
              [ngClass]="getSeatsStatus(course.seatsLeft, course.capacity).class"
            >
              {{ getSeatsStatus(course.seatsLeft, course.capacity).message }}
            </div>
          </div>
        </div>

        <div class="card-footer">
          <button class="btn btn-primary" [disabled]="course.seatsLeft === 0">
            {{ course.seatsLeft === 0 ? 'Curso completo' : 'Ver detalles' }}
          </button>
        </div>
          </div>
        }
      </div>
    }
  </div>
</div>
